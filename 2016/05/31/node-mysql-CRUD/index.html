<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="node 小试牛刀之 mysql 增删改查"/>




  <meta name="keywords" content="node,mysql,增删查改," />





  <link rel="alternate" href="/default" title="Elevenbeans' Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="http://yoursite.com/2016/05/31/node-mysql-CRUD/"/>


<meta name="description" content="node 应该是如今最火热的技术了。
看完了朴灵的《深入浅出 nodejs》，终是要练练手吧。
第一反应是操作数据库，废话不多说，直接开始。
Mysql 服务搭建先用brew安装mysql1brew install mysql
安装完，尝试登录使用，启动。1mysql.server start">
<meta property="og:type" content="article">
<meta property="og:title" content="node 小试牛刀之 mysql 增删改查">
<meta property="og:url" content="http://yoursite.com/2016/05/31/node-mysql-CRUD/index.html">
<meta property="og:site_name" content="Elevenbeans' Blog">
<meta property="og:description" content="node 应该是如今最火热的技术了。
看完了朴灵的《深入浅出 nodejs》，终是要练练手吧。
第一反应是操作数据库，废话不多说，直接开始。
Mysql 服务搭建先用brew安装mysql1brew install mysql
安装完，尝试登录使用，启动。1mysql.server start">
<meta property="og:image" content="https://img.alicdn.com/tps/TB1WLuRKXXXXXcKXFXXXXXXXXXX-1122-500.png">
<meta property="og:image" content="https://img.alicdn.com/tps/TB1.7GSKXXXXXcKXFXXXXXXXXXX-566-466.png">
<meta property="og:image" content="https://img.alicdn.com/tps/TB1hT90KXXXXXcvXpXXXXXXXXXX-584-522.png">
<meta property="og:image" content="https://gw.alicdn.com/tps/TB119SUKXXXXXbVXFXXXXXXXXXX-928-402.png">
<meta property="og:updated_time" content="2016-08-19T05:56:59.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="node 小试牛刀之 mysql 增删改查">
<meta name="twitter:description" content="node 应该是如今最火热的技术了。
看完了朴灵的《深入浅出 nodejs》，终是要练练手吧。
第一反应是操作数据库，废话不多说，直接开始。
Mysql 服务搭建先用brew安装mysql1brew install mysql
安装完，尝试登录使用，启动。1mysql.server start">
<meta name="twitter:image" content="https://img.alicdn.com/tps/TB1WLuRKXXXXXcKXFXXXXXXXXXX-1122-500.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> node 小试牛刀之 mysql 增删改查 - Elevenbeans' Blog </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Elevenbeans' Blog</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/">
                            
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                All
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/categories/tech">
                            
                            
                                Tech
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/categories/life">
                            
                            
                                Life
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About me
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          node 小试牛刀之 mysql 增删改查
        
      </h1>

      <time class="post-time">
          May 31 2016
      </time>
    </header>



    
            <div class="post-content">
            <script src="/assets/js/APlayer.min.js"> </script><p>node 应该是如今最火热的技术了。</p>
<p>看完了朴灵的《深入浅出 nodejs》，终是要练练手吧。</p>
<p>第一反应是操作数据库，废话不多说，直接开始。</p>
<h2 id="Mysql-服务搭建"><a href="#Mysql-服务搭建" class="headerlink" title="Mysql 服务搭建"></a>Mysql 服务搭建</h2><h3 id="先用brew安装mysql"><a href="#先用brew安装mysql" class="headerlink" title="先用brew安装mysql"></a>先用<code>brew</code>安装mysql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install mysql</div></pre></td></tr></table></figure>
<h3 id="安装完，尝试登录使用，启动。"><a href="#安装完，尝试登录使用，启动。" class="headerlink" title="安装完，尝试登录使用，启动。"></a>安装完，尝试登录使用，启动。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql.server start</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="这时就可以登录使用mysql了，"><a href="#这时就可以登录使用mysql了，" class="headerlink" title="这时就可以登录使用mysql了，"></a>这时就可以登录使用mysql了，</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -h localhost -u root -p XXX</div></pre></td></tr></table></figure>
<p>其中 -h 后参数是地址的意思，-u 后是用户名（默认root），-p后是密码(初始为空)</p>
<p><img src="https://img.alicdn.com/tps/TB1WLuRKXXXXXcKXFXXXXXXXXXX-1122-500.png" alt="img1"></p>
<h3 id="可以试着查看数据库。"><a href="#可以试着查看数据库。" class="headerlink" title="可以试着查看数据库。"></a>可以试着查看数据库。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">show databases</div></pre></td></tr></table></figure>
<p><img src="https://img.alicdn.com/tps/TB1.7GSKXXXXXcKXFXXXXXXXXXX-566-466.png" alt="img2"></p>
<h3 id="可以试着查看数据库中的表。"><a href="#可以试着查看数据库中的表。" class="headerlink" title="可以试着查看数据库中的表。"></a>可以试着查看数据库中的表。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">use &lt;databaseName&gt;</div><div class="line">show tables</div></pre></td></tr></table></figure>
<p><img src="https://img.alicdn.com/tps/TB1hT90KXXXXXcvXpXXXXXXXXXX-584-522.png" alt="img3"></p>
<h2 id="node-代码"><a href="#node-代码" class="headerlink" title="node 代码"></a>node 代码</h2><h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><pre><code>var mysql = require(&apos;mysql&apos;);

var connection = mysql.createConnection({
    host     : &apos;localhost&apos;,
    user     : &apos;root&apos;,
    password : &apos;&apos;,
    database : &apos;school&apos;,
    port:&apos;3306&apos;
});
connection.connect();
</code></pre><h3 id="插入一个user"><a href="#插入一个user" class="headerlink" title="插入一个user"></a>插入一个user</h3><pre><code>var usr = {id:&apos;2334&apos;,name:&apos;zhangsan&apos;,address:&apos;zhangsan&apos;,year:&apos;2016-06-01&apos;};

connection.query(&apos;insert into teacher set ?&apos;, usr, function(err, result) {
    if (err) throw err;
    console.log(&apos;inserted zhangsan&apos;);
    console.log(result);
    console.log(&apos;\n&apos;);
});

connection.query(&apos;select * from teacher&apos;, function(err, rows, fields) {
    if (err) throw err;
    console.log(&apos;selected after inserted&apos;);
    for(var i= 0,usr;usr=rows[i++];){
        console.log(&apos;user name=&apos;+usr.name + &apos;, address=&apos;+usr.address);
    }
    console.log(&apos;\n&apos;);
});
</code></pre><p><img src="https://gw.alicdn.com/tps/TB119SUKXXXXXbVXFXXXXXXXXXX-928-402.png" alt="img4"></p>
<h3 id="更新user，带条件"><a href="#更新user，带条件" class="headerlink" title="更新user，带条件"></a>更新user，带条件</h3><pre><code>connection.query(&apos;update teacher set address=&quot;hangzhou&quot; where name=&quot;libin&quot;&apos;, {address:&apos;shanghai&apos;}, function(err, result) {
     if (err) throw err;

     console.log(&apos;updated zhangsan\&apos;s address to ddd&apos;);
     console.log(result);
     console.log(&apos;\n&apos;);
 });

 connection.query(&apos;select * from teacher&apos;, function(err, rows, fields) {
     if (err) throw err;

     console.log(&apos;selected after updated&apos;);
     for(var i= 0,usr;usr=rows[i++];){
         console.log(&apos;user name=&apos;+usr.name + &apos;, address=&apos;+usr.address);
     }

     console.log(&apos;\n&apos;);
 });
</code></pre><h3 id="删除-user，带条件"><a href="#删除-user，带条件" class="headerlink" title="删除 user，带条件"></a>删除 user，带条件</h3><pre><code>connection.query(&apos;delete from  teacher where name=&quot;zhangsan&quot;&apos;, {address:&apos;zhangsan&apos;}, function(err, result) {
     if (err) throw err;
     console.log(&apos;deleted zhangsan&apos;);
     console.log(result);
     console.log(&apos;\n&apos;);
});
</code></pre><h3 id="查询user，所有"><a href="#查询user，所有" class="headerlink" title="查询user，所有"></a>查询user，所有</h3><pre><code> connection.query(&apos;select * from teacher&apos;, function(err, rows, fields) {
   if (err) throw err;
     console.log(&apos;selected after deleted&apos;);
     for(var i= 0,usr;usr=rows[i++];){
         console.log(&apos;user name=&apos;+usr.name + &apos;, address=&apos;+usr.address);
   }
   console.log(&apos;\n&apos;);

});
</code></pre><h3 id="关闭连接"><a href="#关闭连接" class="headerlink" title="关闭连接"></a>关闭连接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">connection.end();</div></pre></td></tr></table></figure>
            </div>
          

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/tags/node/">node</a>
          
            <a href="/tags/mysql/">mysql</a>
          
            <a href="/tags/增删查改/">增删查改</a>
          
        </div>

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/06/03/DomReady/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">由 $(document).ready 发散开去</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2016/05/22/2015-2016-小结/">
        <span class="next-text nav-default">2015-2016 小结</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2017
    <span class="footer-author">Elevenbeans.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
